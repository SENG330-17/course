# Other approaches to OO patterns

## Prototypes/JScript
http://sporto.github.io/blog/2013/02/22/a-plain-english-guide-to-javascript-prototypes/

## Actors/Elixir

## Functions/Observer

### Overview/Learning Objectives
* the nature of functional programming
* several key functional concepts 
* leveraging functional idioms for design

### Why Functional Approach
Much of FP has focused on programming language idioms e.g. lambdas, purity, typing

But FP is good for parallelism and concurrency, which are increasingly necessary at the design level.

FP is good at reductive reasoning: keeping things simple and side-effect free makes it easier to reason.

### [Cube Composer](https://david-peter.de/cube-composer/)
Find someone with a laptop and work through at least levels 0 and 1


### Review: Functional Paradigm
(note, a lot is derived from the [Fairbanks talk](http://www.georgefairbanks.com/blog/saturn-2017-functional-programming-invades-architecture/))

Function composition 

* Build software by composing small functions (cf 'pipe and filter style')
* functions as arguments `f(g(x))`

### Pure Functions
* no side effects -> same arguments yield same results
* Reasoning about the outcome is easier

> curl http://localhost/numberAfter/5 → [always 6]
> 
> curl http://localhost/customer/5/v1 → [always v1 of customer]

vs

> curl http://localhost/customer/5 → [may be different]


### Statelessness & Immutability
If there’s no state

* Easy to reason about
* All instances are equivalent

If things are immutable

* Easy to reason about
* Concurrent access is safe

### Idempotence
Idempotence = get the same answer regardless of how many times you do it 

> resizeTo100px(image) vs shrinkByHalf(image)

* Often hard to guarantee something is done exactly once 
* Eg: Is the task stalled or failed?
* Go ahead and schedule it again without fear that you’ll get a duplicate result

### Declarative (vs imperative)

* Functional programming defines what something *is*
    * ... or how it relates to other things 
    * Versus a series of operations that yield desired state
* Definition, not procedure

* Example: how much paint do I need?
    * `while(!done) { fence.paint(); }`
* Vs function parameterized by length and width
    - `paint(l=20,w=3)`

### FP and the GoF

* Many of the patterns in the Gang of Four Design Pattern book are idiomatic in FP. That means there is no need for a design pattern, as the language contains built-in features to handle the same design challenge.
* Let's look at [Observer](https://github.com/mariofusco/from-gof-to-lambda/blob/master/src/main/java/org/mfusco/fromgoftolambda/examples/observer/ObserverLambda.java) from the Mario Fusco presentation.
* That example shows that using a `ConcurrentHashMap` and Java8's `Consumer` interface can radically reduce the amount of code required (check out the GoF example in the same repository). 
* This makes the code easier to read (assuming our coder has a basic knowledge of Java8 and functional programming), and easier to maintain.


### FP and Design
* Streams of events can be processed using functional operators (e.g., `filter`)
* Example: Reactive Programming (not `React` the framework)

(see [Andre Staltz intro](https://gist.github.com/staltz/868e7e9bc2a7b8c1f754) )

